<div class="form-container cadastro-produto">
  <h2>Produto</h2>

  <!-- Campo Nome com busca em tempo real -->
  <div class="form-group" style="position: relative">
    <label class="label" for="nome">Nome</label>
    <input
      type="text"
      id="nome"
      class="form-control"
      [(ngModel)]="nome"
      (ngModelChange)="buscarPorNome($event)"
    />

    <!-- Lista suspensa -->
    <div class="search-results" *ngIf="produtosFiltrados.length > 0">
      <ul>
        <li *ngFor="let p of produtosFiltrados" (click)="selecionarProduto(p)">
          {{ p.nome }} - R$ {{ p.preco.toFixed(2).replace(".", ",") }}
        </li>
      </ul>
    </div>
  </div>

  <!-- Campo Descrição -->
  <div class="form-group">
    <label class="label" for="descricao">Descrição</label>
    <textarea
      id="descricao"
      class="form-control"
      [(ngModel)]="descricao"
    ></textarea>
  </div>

  <!-- Campo Preço -->
  <div class="form-group">
    <label class="preco-label" for="preco">Preço</label>
    <input
      type="text"
      id="preco"
      class="form-control"
      [(ngModel)]="preco"
      (input)="formatarMoeda($event)"
    />
  </div>

  <!-- Botões -->
  <button
    *ngIf="!produtoSelecionado"
    (click)="criar()"
    [disabled]="!nome || !descricao || !preco"
  >
    Cadastrar
  </button>

  <button
    *ngIf="produtoSelecionado"
    (click)="atualizar(produtoSelecionado.id)"
    [disabled]="!nome || !descricao || !preco"
  >
    Atualizar
  </button>

  <button
    *ngIf="produtoSelecionado"
    (click)="deletar(produtoSelecionado.id)"
    class="btn-excluir"
  >
    Excluir
  </button>

  <p *ngIf="mensagem" style="margin-top: 12px; color: #003366">
    {{ mensagem }}
  </p>
</div>
